---
Connection State Machine
---
stateDiagram-v2
  direction LR
  classDef s_default fill:white,color:black
  classDef s_inactive fill:white,color:black
  classDef s_parallel color:black,fill:white
  classDef s_active color:red,fill:darksalmon
  classDef s_previous color:blue,fill:azure
  
  state "REQUESTED" as REQUESTED
  Class REQUESTED s_active
  state "UNDER_PROVISIONING" as UNDER_PROVISIONING
  Class UNDER_PROVISIONING s_default
  state "REJECTED" as REJECTED
  Class REJECTED s_default
  state "UP" as UP
  Class UP s_default
  state "DOWN" as DOWN
  Class DOWN s_default
  state "MODIFYING" as MODIFYING
  Class MODIFYING s_default
  state "ERROR" as ERROR
  Class ERROR s_default
  state "RECOVERING" as RECOVERING
  Class RECOVERING s_default
  state "DELETED" as DELETED
  Class DELETED s_default
  state "DISABLED" as DISABLED
  Class DISABLED s_default
  
  REQUESTED --> UNDER_PROVISIONING: PROVISION
  REQUESTED --> REJECTED: REJECT
  UNDER_PROVISIONING --> UP: PROVISION_SUCCESS
  UNDER_PROVISIONING --> DOWN: PROVISION_FAIL
  UP --> MODIFYING: MODIFY
  UP --> ERROR: FAIL
  UP --> DELETED: DELETE
  UP --> DISABLED: MAIN_DISABLE
  MODIFYING --> UNDER_PROVISIONING: MOD_SUCCESS
  MODIFYING --> DOWN: MOD_FAIL
  ERROR --> RECOVERING: RECOVER
  ERROR --> DELETED: DELETE
  RECOVERING --> UP: RECOVER_SUCCESS
  RECOVERING --> ERROR: RECOVER_FAIL
  DOWN --> DELETED: DELETE
  DISABLED --> UP: MAIN_ENABLE
  [*] --> REQUESTED